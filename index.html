<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FlowChart Manager</title>
  <style>
    /* Basic resets and styling */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
    }
    nav button {
      background: #2980b9;
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      margin-left: 0.5rem;
      cursor: pointer;
      border-radius: 4px;
    }
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      padding-top: 50px;
    }
    .modal-content {
      background: white;
      margin: auto;
      padding: 20px;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      position: relative;
    }
    .close-button {
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 24px;
      cursor: pointer;
    }
    /* Style for the Text-to-Speech button */
    .tts-btn {
      background: #27ae60;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      margin-top: 10px;
      cursor: pointer;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <header>
    <h1>FlowChart Manager</h1>
    <nav>
      <button id="templateBtn">Templates</button>
      <button id="exportBtn">Export</button>
      <input type="file" id="fileInput" accept=".json">
      <button id="uploadBtn" class="upload-btn">Upload</button>
      <div id="fileNameDisplay"></div>
    </nav>
  </header>
  <div id="flowchart"></div>
  <!-- Popup Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="closeModal">Ã—</span>
      <h2>Task Details</h2>
      <form id="taskForm">
        <label>Task Name:
          <input type="text" id="taskName" required>
        </label>
        <br>
        <label>Responsible:
          <input type="text" id="responsible" required>
        </label>
        <br>
        <label>Status:
          <select id="status">
            <option value="Not Started">Not Started</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
        </label>
        <br>
        <label>Deadline:
          <input type="date" id="deadline">
        </label>
        <br>
        <label>Priority:
          <select id="priority">
            <option value="Low">Low</option>
            <option value="Normal">Normal</option>
            <option value="High">High</option>
          </select>
        </label>
        <br>
        <label>Action Description:
          <textarea id="actionDescription" maxlength="300"></textarea>
        </label>
        <br>
        <!-- Text-to-Speech button -->
        <button type="button" class="tts-btn" id="readActionDescription">ðŸ”Š Read Aloud</button>
        <div class="action-buttons">
          <button type="submit" class="save-btn">Save</button>
        </div>
      </form>
    </div>
  </div>
  <script>
    // Wait until the DOM is fully loaded before binding event listeners
    document.addEventListener("DOMContentLoaded", function() {
      // Text-to-Speech functionality: Read aloud the content of the Action Description textarea
      function readActionDescription() {
        const text = document.getElementById("actionDescription").value;
        if (!text) {
          alert("No text to read!");
          return;
        }
        const speech = new SpeechSynthesisUtterance(text);
        speech.rate = 1.0;
        speech.pitch = 1.0;
        window.speechSynthesis.speak(speech);
      }
      document.getElementById("readActionDescription").addEventListener("click", readActionDescription);

      // Modal functionality: Open modal when the "Templates" button is clicked
      const modal = document.getElementById("modal");
      document.getElementById("templateBtn").addEventListener("click", function() {
        modal.style.display = "block";
      });

      // Close modal when the close button (Ã—) is clicked
      document.getElementById("closeModal").addEventListener("click", function() {
        modal.style.display = "none";
      });

      // Optionally close the modal if clicking outside the modal-content area
      window.addEventListener("click", function(event) {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>
